[test-groups]

[profile.default]
retries = { backoff = "exponential", count = 2, delay = "5s", jitter = true }
slow-timeout = { period = "30s", terminate-after = 3 }
# Exclude flaky tests from regular CI runs - they run in nightly test-flaky workflow
default-filter = "not test(/^flaky_/)"

[[profile.default.overrides]]
filter = "test(/ext_integration/)"
slow-timeout = { period = "5m", terminate-after = 4 }

# Do not re-run so that `cargo cheats` is ran locally.
[[profile.default.overrides]]
filter = "package(foundry-cheatcodes-spec)"
retries = 0

# Profile for running flaky tests (used by nightly CI and for local debugging)
# Run with: cargo nextest run --profile flaky
[profile.flaky]
default-filter = "test(/^flaky_/)"
retries = { backoff = "exponential", count = 5, delay = "10s", jitter = true }
slow-timeout = { period = "60s", terminate-after = 3 }
